// Variadic error macro
#def error($$*) \
  for i as 0..len($$*) { \
    print($$*[i]); \
  } \
  exit(1);

// Generic clamp with any_num
ui64 clamp(ui64 num, ui64 min, ui64 max) {
  if (min > max) {
    error("Min cannot be greater than max!");
  }
  num = {
    (num < min) -> {
      min;
    };
    (num > max) -> {
      max;
    };
    _ -> num;
  };
  return num;
}

// Allow overflow for s pecial case
i64 bigCounter = 99999999999999999999999999999999;
print(bigCounter);

class player {
  public {
    int health = 100;
    int x = 0;
    int y = 0;

    // other = between seen and not seen
    // false/true = seen or unseen
    tribool seen = other;

    void setHealth(int h) {
      health = {
        (h > 100) -> {
          print("Max health!");
          return 100;
      };
        (h <= 0) -> {
          print("Player died!");
          return 0;
        };
        _ -> h;
      };
    }

    void move(int dx, int dy) {
      x = clamp(x + dx, 0, 100);
      y = clamp(y + dy, 0, 100);
    }

    void invPrint() {
      print(inventory);
    }
  }
  private {
    list inventory;
  }
}

player p = new player;
p.move(10, 20);
p.setHealth(150);  // Clamps to 100

if (p.health == 32) {
  error("Error...", "\n", "i don know D:");
} else {
  if (p.health == 10) {
    error("arf");
  }
}
